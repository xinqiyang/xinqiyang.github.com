<!-- build time:Tue Oct 20 2020 13:53:07 GMT+0900 (Japan Standard Time) --><!DOCTYPE html><html class="theme-next muse use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.0.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.3"><link rel="mask-icon" href="/images/logo.svg?v=6.0.3" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Muse",version:"6.0.3",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="keywords" content="xinqiyang blog"><meta name="description" content="xinqiyang&apos;s notes"><meta property="og:type" content="website"><meta property="og:title" content="xinqiyang notes"><meta property="og:url" content="http://yangxinqi.com/index.html"><meta property="og:site_name" content="xinqiyang notes"><meta property="og:description" content="xinqiyang&apos;s notes"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="xinqiyang notes"><meta name="twitter:description" content="xinqiyang&apos;s notes"><link rel="alternate" href="/atom.xml" title="xinqiyang notes" type="application/atom+xml"><link rel="canonical" href="http://yangxinqi.com/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>xinqiyang notes</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-home"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">xinqiyang notes</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Nothing behind me, everything ahead of me,as is ever so on the road.</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-finance"><a href="/categories/finance" rel="section"><i class="menu-item-icon fa fa-fw fa-money"></i><br>finance</a></li><li class="menu-item menu-item-blockchain"><a href="/categories/blockchain" rel="section"><i class="menu-item-icon fa fa-fw fa-bitcoin"></i><br>blockchain</a></li><li class="menu-item menu-item-ai"><a href="/categories/ai" rel="section"><i class="menu-item-icon fa fa-fw fa-star"></i><br>ai</a></li><li class="menu-item menu-item-devops"><a href="/categories/devops" rel="section"><i class="menu-item-icon fa fa-fw fa-code"></i><br>devops</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-other"><a href="/categories/other" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>other</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><section id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/10/20/Oracle协议比较分析-Band-vs-Chainlink/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/10/20/Oracle协议比较分析-Band-vs-Chainlink/" itemprop="url">Oracle协议比较分析-Band vs Chainlink</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-10-20T11:26:02+09:00">2020-10-20</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">blockchain</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近项目中需要使用到Oracle,对价格进行更新，找了一圈市面上的，发现Band和Chainlink，对Chainlink的比价深有体会，遂开始深入研究下Oracle的实现机制，以及如何讲现实世界中的数据和API链接到智能合约中。 以下主要是翻译了SmartContent写的Band协议和Chainlink的对比分析的文章， 原文地址： <a href="https://medium.com/@smartcontentpublication/a-comparative-analysis-of-band-protocol-and-chainlink-54b7d14823b5" target="_blank" rel="noopener">https://medium.com/@smartcontentpublication/a-comparative-analysis-of-band-protocol-and-chainlink-54b7d14823b5</a> ，对文章进行了翻译和补充，基本使用Google翻译进行简要的翻译，可以当成一篇PR稿文章，主要从几个维度，比如 数据质量，随机性以来，采纳指标，资源效率和网络设计，团队，去中心化和多链支持等各个方面，对Band和Chainlink进行了比较，结果都是Chainlink胜出了。</p><p>大杨个人意见，看过Band的创始团队和背后的投资机构，都是相当有前景，而且Oracle语言机的盈利模式上都是平台方来撮合数据需求方和提供方调用，然后支付方式都是用平台的虚拟币支付，这样的方式其实也带来了很大不确定性，随着平台方币价的上涨，也带来了需求方很大的调用成本，本身现在公开的调用方式，实时性也不好，如果采用较为实时的解决方案，那么使用LINK代币来支付的费用，换算成法币的话，也是非常高的。从文章从可以看到的是Band协议V2，依赖于与Cosmos, 而且很区块链化，对于用户的直接引入也很不友好，此外Chainlink VRF作为一个显著的重大热点，为NFT提供服务，Band目前还没有什么亮点仅仅挂个Oracle的竞争者。整体来看，Band还是比较困难的，推荐大家使用Chainlink.</p><p><img src="/images/oracle/oracle.png" alt="Oracle Analysis"></p><div class="post-button text-center"><a class="btn" href="/2020/10/20/Oracle协议比较分析-Band-vs-Chainlink/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/09/24/DEFI深入浅出实战编程一入门篇/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/09/24/DEFI深入浅出实战编程一入门篇/" itemprop="url">DEFI深入浅出实战编程一入门篇</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-09-24T19:47:25+09:00">2020-09-24</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/blockchain/" itemprop="url" rel="index"><span itemprop="name">blockchain</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>翻译者： 大杨， 链因智能CEO， 一家初创区块链技术公司，DEFI布道者。</p><p>技术点： DEFI，ETH，NODEJS，SOLIDITY</p><p>今天抽出了一些时间，翻译了CoinBase的<a href="https://twitter.com/petejkim" target="_blank" rel="noopener"><em>Pete Kim</em></a> 写的【<a href="https://blog.coinbase.com/introduction-to-building-on-defi-with-ethereum-and-usdc-part-1-ea952295a6e2" target="_blank" rel="noopener">Introduction to Building on DeFi with Ethereum and USDC — Part 1</a>】DEFI编程入门学习的文章。</p><p>翻了下Pete Kim的twitter和他的github，发现是个全栈高手和社区活跃者，看上去应该是韩国人，技术很不错，人也很帅 😂。</p><p>最为美系的第一交易所CoinBase对整个Crypto生态的贡献是巨大的，本篇DEFI编程的入门文章也非常适合新手，看了有很想翻译的冲动，就花了2小时做了下整理，并在kovan的网络上实战了一把，对很多细节的地方做了补充，强烈推荐给大家。 经历DEFI，后续链因智能3年积累的相关技术都会进行开源，通过开源促进技术发展。</p><p><strong>以下是文章的内容：</strong></p><p>首先介绍 CoinBase 的价值观和愿景。</p><p>在Coinbase，我们的任务是建立一个开放的财务系统。我们坚信，促进经济自由将使世界变得更美好。分布式金融，简称DeFi-一种开放，无边界和可编程的金融-是我们伟大愿景不可分割的一部分。</p><h3 id="智能合约"><a href="#智能合约" class="headerlink" title="智能合约"></a>智能合约</h3><p>DeFi由运行在分布式网络（例如以太坊（“区块链”））上的数字货币（如美元代币（USDC））智能合约组成。智能合约的想法由来实际上很简单。数字货币和密码学的先驱尼克·萨博（Nick Szabo）最初在1997年提出了这个想法，他将<strong>自动售货机</strong>描述为<strong>智能合约的始祖</strong>。</p><p>自动售货机是合同的自动化版本，以电子硬件的形式表示：<br>您通过向机器中投入钱来支付显示的价格，机器将为您分配饮料<br>您不支付显示的价格，也不分配饮料<br>如果您支付了显示的价格但机器没有分配饮料，或者即使您没有支付显示的价格也分配了饮料，则违反了合同<br>自动售货机无需人工干预即可完全自主地管理其合同义务。<br>现代智能合约的工作方式相同，但是合约条款被表示为可执行的计算机代码，而不是在硬件中实现。在其上运行智能合约的网络的分散性确保了它们以书面形式执行，并且没有任何单个实体能够弯曲规则或操纵结果。一个重要的警告是，因为网络逐字执行代码，所以错误的智能合约代码可能会导致意外的后果（“代码就是法律”）。</p><h3 id="没有比现在更好的时机"><a href="#没有比现在更好的时机" class="headerlink" title="没有比现在更好的时机"></a><strong>没有比现在更好的时机</strong></h3><p>许多人发现基于加密技术构建的区块链非常令人生畏，并认为只有坚韧的计算机科学家才能使用它。尽管就在几年前，情况确实如此，但自那时以来，工具和开发人员用户体验已有了显着改善，任何具有基本编程技能的人都可以开始构建。<br>DeFi生态系统目前正在爆炸性增长。 USDC在不到2年的时间里达到了$1B的市值，并且在不到3年的时间内，存储在各种DeFi服务中的资产总值超过$2B。确实没有一个哪个领域有这么好的时机快速发展。</p><p><img src="/images/defi/defi_1.png" alt="DeFi Pulse"><br>来源：DeFi Pulse</p><p>以下教程是开始开发自己的DeFi智能合约的简单指南。<br>我们希望，<strong>这样的指南将有助于建立全球开放的民主化金融体系</strong>。</p><h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><p>本教程系列假定您具有JavaScript的经验，JavaScript是世界上使用最广泛的编程语言。您也可能被介绍过Solidity，这是一种在以太坊上使用的智能合约编程语言，这是世界上使用最广泛的智能合约区块链编程语言。最后，您将与DeFi应用常用稳定币USDC进行交互（这里我们Fake了一个USDC，不是真实USDC）。</p><h3 id="搭建开发环境"><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h3><p>首先，我们需要一个类似Unix的环境，并在其上安装Node.js v12.x（最新的LTS版本）。 MacOS本质上是Unix环境，Windows用户可以通过从Microsoft Store在WSL上安装Ubuntu来获得它。在MacOS和Windows中可以找到更详细的步骤。对于代码编辑器，强烈建议使用 <strong>Visual Studio Code</strong>，因为您要使用的项目模板已经预先配置好了，但是从技术上讲，您可以使用任何编辑器。哦，我更喜欢Vim而不是Emacs。</p><h3 id="设置项目"><a href="#设置项目" class="headerlink" title="设置项目"></a>设置项目</h3><p>设置Solidity项目需要一些工作，老实说，分心对于这个阶段的学习不是很有用，因此已经为您准备了一个预先配置的模板。</p><p>这块作者提供了一个很好的模版来跑，原地址： <a href="https://github.com/CoinbaseStablecoin/solidity-tutorial" target="_blank" rel="noopener">https://github.com/CoinbaseStablecoin/solidity-tutorial</a> ，这里我做了一些修改，FORK了一个项目地址，大家需要看代码的可以用下面的地址，作者提供的模版非常方便，可以让动手，推荐使用作者的地址。</p><p>在终端中运行以下命令以下载并设置模板：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/CoinbaseStablecoin/solidity-tutorial.git <span class="comment"># 作者原模版地址</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/chaininout/solidity-tutorial.git  <span class="comment"># 这个是包含了最新代码的地址</span></span><br><span class="line"><span class="built_in">cd</span> solidity-tutorial</span><br><span class="line">npm install -g yarn        <span class="comment"># Install yarn package manager 安装包管理器</span></span><br><span class="line">yarn                       <span class="comment"># Install project dependencies 安装依赖</span></span><br></pre></td></tr></table></figure><p>当yarn尝试构建本机扩展时，您可能会看到一些编译错误。这些是可选的，可以忽略这些错误。只要您最后看到“完成”消息，就可以继续。</p><h3 id="在Visual-Studio-Code中打开项目"><a href="#在Visual-Studio-Code中打开项目" class="headerlink" title="在Visual Studio Code中打开项目"></a>在Visual Studio Code中打开项目</h3><p>在Visual Studio Code中打开项目文件夹（solidity-tutorial）。第一次打开项目时，Visual Studio Code可能会提示您安装扩展。继续并单击“全部安装”，这将向编辑器添加各种有用的扩展，例如自动代码格式和Solidity语法突出显示。</p><h3 id="在以太坊上创建账户"><a href="#在以太坊上创建账户" class="headerlink" title="在以太坊上创建账户"></a>在以太坊上创建账户</h3><p>在以太坊上进行任何操作之前，您需要拥有一个帐户。帐户通常称为“钱包”，因为它们可以包含ETH和USDC等数字资产。最终用户通常使用Coinbase Wallet或Metamask等以太坊钱包应用程序创建帐户，但是使用模板随附的出色的ethers.js库，以编程方式创建帐户也非常简单。</p><p>在src文件夹中创建一个名为createWallet.js的新JavaScript文件，然后输入以下代码：</p><p>保存文件，并使用Node执行代码，如下所示：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"><span class="keyword">const</span> wallet = ethers.Wallet.createRandom();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Mnemonic: <span class="subst">$&#123;wallet.mnemonic.phrase&#125;</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Address: <span class="subst">$&#123;wallet.address&#125;</span>`</span>);</span><br></pre></td></tr></table></figure><p>在shell命令行状态下执行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node src/createWallet.js</span><br></pre></td></tr></table></figure><p>执行后生成如下结果, 生成助记词和地址：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br></pre></td></tr></table></figure><p>刚才发生了什么？ <strong>好吧，您拥有了一个全新的以太坊账户。</strong> “助记符”或可能更普遍地称为“恢复短语”是从帐户执行操作所需的密钥的人类可读表示，并且地址是帐户的名称和标识符。将它们复制到某个地方。附带说明一下，<strong>本文中显示的助记符已稍作更改，以阻止您使用它，请使用您自己的助记符</strong>！</p><p>可以将它们视为银行帐户的密码和帐号，只需要几秒钟即可创建一个，并且不必填写申请表或共享任何个人信息。您也可以在任何地方运行此代码。<br>⚠️<strong>注意该帐户的记忆符号必须保密。如果丢失，您将永远无法访问您的帐户以及该帐户中存储的所有资产，没有人能够为您提供帮助！妥善保管！</strong><br>从技术上讲，您本身并没有真正“创建”帐户。相反，您创建的是<strong>私钥/公钥对</strong>。如果您对引擎盖下实际发生的事情感到好奇，请阅读椭圆曲线密码学以及比特币和以太坊规范BIP39，BIP32，EIP55及其在此项目中的实现。</p><h2 id="关于Gas燃料和挖矿"><a href="#关于Gas燃料和挖矿" class="headerlink" title="关于Gas燃料和挖矿"></a>关于Gas燃料和挖矿</h2><p>以太坊是一个分布式网络，由世界各地成千上万的计算机组成，它们并非完全免费。要在区块链上执行任何状态更改（例如存储和更新数据），您必须向网络运营商支付以太坊（ETH）的交易费，在以太坊上也称为“ GAS”。这与运营商为在链中添加新区块而获得的奖励一样，也激励着他们保持计算机正常运行。此过程称为“挖矿”，而网络运营商称为“矿工”。我们将在本教程的后面部分（GAS，GAS价格和GAS限制）再次讨论这一点。</p><h3 id="获取测试网ETH"><a href="#获取测试网ETH" class="headerlink" title="获取测试网ETH"></a>获取测试网ETH</h3><p>现在您已经有一个帐户，您应该存入一些ETH。我们不想在开发时浪费真钱，因此我们将获得一些假的ETH，用于在测试网络（“ testnet”）上进行开发和测试。有许多不同的以太坊测试网，但由于容易获得测试Token，因此我们将使用Kovan。首先，让我们使用以太坊的区块浏览器Etherscan检查当前余额。为此，您可以在浏览器中输入以下网址，然后用您之前创建的地址（从0x开始）替换 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008。<br><a href="https://kovan.etherscan.io/address/0x6598f11d48Da2bfA897d5Eb3968223f98dabc008" target="_blank" rel="noopener">https://kovan.etherscan.io/address/0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</a><br>您应该看到您的余额为0 ETH。保持此选项卡处于打开状态，然后在其他选项卡中打开Kovan Ethereum Faucet 地址： <a href="https://faucet.kovan.network。在页面中，输入您的地址，然后单击“发送给我”按钮。交易可能只需要几秒钟到一分钟或一两分钟即可完成。再次检查Etherscan，您应该在列表中看到1" target="_blank" rel="noopener">https://faucet.kovan.network。在页面中，输入您的地址，然后单击“发送给我”按钮。交易可能只需要几秒钟到一分钟或一两分钟即可完成。再次检查Etherscan，您应该在列表中看到1</a> ETH的新余额和一笔传入交易。</p><p><img src="/images/defi/defi_2.png" alt="DeFi Pulse"><br>资料来源：<a href="https://faucet.kovan.network" target="_blank" rel="noopener">https://faucet.kovan.network</a></p><h2 id="以编程方式获取ETH余额"><a href="#以编程方式获取ETH余额" class="headerlink" title="以编程方式获取ETH余额"></a>以编程方式获取ETH余额</h2><p>连接以太坊，使用Etherscan查看余额非常有用，但是也可以通过代码轻松查看余额。但是，在回到代码之前，我们需要一种连接到以太坊的方法。有很多方法可以做到这一点，包括自己在计算机上运行网络节点，但是到目前为止，最快，最简单的方法是通过诸如INFURA或Alchemy之类的托管节点提供程序来实现，也可以自建节点。前往INFURA，创建一个免费帐户并创建一个新项目以获取API密钥（项目ID），链接这里： <a href="https://infura.io/dashboard/ethereum" target="_blank" rel="noopener">https://infura.io/dashboard/ethereum</a> 注册后在面板中创建自己的Project，然后拿到APIKEY。如果要自己搭建节点，也可以使用Go Ethereum（“ geth”）和Open Ethereum（以前称为Parity Ethereum）是两种使用最广泛的以太坊节点软件，这里后续我会在后续章节中列举节点搭建。</p><h4 id="用代码查看ETH余额"><a href="#用代码查看ETH余额" class="headerlink" title="用代码查看ETH余额"></a>用代码查看ETH余额</h4><p>首先，让我们编写代码以从助记符中读取并获取帐户。在src文件夹中创建一个名为wallet.js的新JavaScript文件，然后输入以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Replace the following with your own mnemonic 这里输入刚刚生成的助记词</span></span><br><span class="line"><span class="keyword">const</span> mnemonic =</span><br><span class="line">  <span class="string">"rabbit enforce proof always embrace tennis version reward scout shock license wing"</span>;</span><br><span class="line"><span class="keyword">const</span> wallet = ethers.Wallet.fromMnemonic(mnemonic);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Mnemonic: <span class="subst">$&#123;wallet.mnemonic.phrase&#125;</span>`</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`Address: <span class="subst">$&#123;wallet.address&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = wallet;</span><br></pre></td></tr></table></figure><p>用您自己的代码替换助记符字符串。<strong>请注意，在生产代码中，助记符不应该这样硬编码</strong>。相反，应从配置文件或环境变量中读取它，以免例如由于将其检入源代码存储库而意外泄漏。<br>执行代码，您应该能够看到与之前获得的地址相同的地址：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/wallet.js</span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br></pre></td></tr></table></figure><p>看到生成的地址：0x6598f11d48Da2bfA897d5Eb3968223f98dabc008<br>接下来，在同一文件夹中创建一个名为provider.js的新文件。在此文件中，我们将使用我们先前获得的INFURA API密钥初始化提供者对象。确保将API密钥字符串替换为您自己的字符串：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const ethers = require("ethers");</span><br><span class="line">// 注意这里我们使用的kovan的网络，下面是infura上申请的key</span><br><span class="line">const provider = ethers.getDefaultProvider("kovan", &#123;</span><br><span class="line">  // Replace the following with your own INFURA API key</span><br><span class="line">  infura: "c844845b06f84d379ba3fb3bba5a1f99",</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">module.exports = provider;</span><br></pre></td></tr></table></figure><p>注意这里需要在truffle-config.js进行网络配置：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">networks: &#123;</span><br><span class="line">    development: &#123;</span><br><span class="line">      host: <span class="string">"localhost"</span>,</span><br><span class="line">      port: <span class="number">8545</span>,</span><br><span class="line">      network_id: <span class="string">"*"</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    mainnet: infuraProvider(<span class="string">"mainnet"</span>, <span class="number">1</span>),</span><br><span class="line">    ropsten: infuraProvider(<span class="string">"ropsten"</span>, <span class="number">3</span>),</span><br><span class="line">    kovan: infuraProvider(<span class="string">"kovan"</span>, <span class="number">42</span>), <span class="comment">//这个是我们加上的测试网络，因为比较快</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>最后，我们将使用在同一文件夹中新建名为getBalance.js的新文件，并通过wallet.js和provider.js来获取ETH余额：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const ethers = require("ethers");</span><br><span class="line">const wallet = require("./wallet");</span><br><span class="line">const provider = require("./provider");</span><br><span class="line"></span><br><span class="line">async function main() &#123;</span><br><span class="line">  const account = wallet.connect(provider);</span><br><span class="line">  const balance = await account.getBalance();</span><br><span class="line">  console.log(`ETH Balance: $&#123;ethers.utils.formatUnits(balance, 18)&#125;`);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure><p>运行代码，您将看到ETH余额！</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">node src/getBalance.js</span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">ETH Balance: 1.0</span><br></pre></td></tr></table></figure><h4 id="代币计价"><a href="#代币计价" class="headerlink" title="代币计价"></a>代币计价</h4><p>我们刚刚创建的代码很容易解释，但是您可能想知道ethers.utils.formatUnits（balance，18）的作用。好吧，ETH实际上可以整除到小数点后18位，最小的面额单位称为“ wei”（发音为“ way”）。换句话说，一个ETH等于1,000,000,000,000,000,000 wei。另一个常见的面额是Gwei（发音为“ Giga-way”），为10亿魏。 getBalance方法碰巧以wei返回结果，因此我们必须通过将结果乘以10⁸将其转换回ETH。可以在这里找到所有面额的清单。<br>您还可以使用ethers.utils.formatEther（balance），这是ethers.utils.formatUnits（balance，18）的简写。</p><h4 id="获取Testnet-USDC"><a href="#获取Testnet-USDC" class="headerlink" title="获取Testnet USDC"></a>获取Testnet USDC</h4><p>您帐户中的ETH感到有些孤单，所以我们也想获取其中的USDC。我在Kovan测试网上部署了一个FakeUSDC智能合约。它没有专门的水龙头网站，但合同包含一项功能，在调用该功能时，您将获得一些免费的Kovan测试网USDC。如果您导航到Etherscan中的合同代码选项卡，并在合同源代码中搜索gimmeSome。这就是我们要调用的功能，用于将一些USDC发送到我们的帐户。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity <span class="number">0.6</span><span class="number">.12</span>;</span><br><span class="line"></span><br><span class="line">contract FakeUSDC is Ownable, ERC20 &#123;</span><br><span class="line">    <span class="keyword">constructor</span>() public Ownable() ERC20("FakeUSDC", "USDC") &#123;</span><br><span class="line">        _setupDecimals(<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">mint</span>(<span class="params">address account, uint256 amount</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">        _mint(account, amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">burn</span>(<span class="params">address account, uint256 amount</span>) <span class="title">external</span> <span class="title">onlyOwner</span> </span>&#123;</span><br><span class="line">        _burn(account, amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * @notice Give the caller 10 USDC (10,000,000 units)</span></span><br><span class="line"><span class="comment">     * 这里我们加了个给测试账户发送代币的方法，能够免费给账户发送USDC测试代币</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">gimmeSome</span>(<span class="params"></span>) <span class="title">external</span> </span>&#123;</span><br><span class="line">        _mint(msg.sender, <span class="number">10e6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="进行交易以调用智能合约"><a href="#进行交易以调用智能合约" class="headerlink" title="进行交易以调用智能合约"></a>进行交易以调用智能合约</h4><p>在以太坊智能合约中主要有两种类型的功能：<strong>读写和只读</strong>。前者可能导致存储在区块链中的数据发生变化，而后者纯粹是读取但从未写入。可以在不创建事务的情况下调用只读函数，因此无需支付交易费用，除非作为读写函数的一部分进行调用。另一方面，<strong>必须在交易内部调用读写功能</strong>，并且必须支付交易费（GAS）。调用gimmeSome函数会导致存储在区块链中的USDC余额发生变化，因此<strong>必须在交易内部调用它</strong>。</p><p>调用智能合约功能需要一些额外的步骤，但这并不太困难。首先，我们需要找到我们要调用的函数的完整接口，也称为<strong>函数签名或函数原型</strong>。在合同源代码中再次查找gimmeSome，您将发现界面如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">gimmeSome</span>(<span class="params"></span>) <span class="title">external</span></span></span><br></pre></td></tr></table></figure><p>这是一个非常简单的函数，不带任何参数，<strong>并且被标记为外部函数，这意味着该函数只能从外部调用，而不能从该协定内的其他函数调用</strong>。因为我们将在事务中直接调用此函数。<br>显而易见，在以太坊主网络上部署的“真实” USDC合约中 <strong>不存在gimmeSome功能</strong>。 下面需要去部署智能合约，才能获取合约的地址，以便在下面调用：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MNEMONIC=<span class="string">"viable glow tone pole input series weather slam blouse embark achieve position"</span> INFURA_API_KEY=<span class="string">"c844845b06f84d379ba3fb3bba5a1f99"</span> truffle deploy --network=kovan</span><br></pre></td></tr></table></figure><p>我们执行 truffle deploy 命令，在kovan测试网络中发布我们写好的合约。 签名的2个是地址的私钥和INFURA的KEY，这样能够用这个账户部署合约，部署完成后将现实如下过程，部署的合约数量和总共花费的GAS的费用。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">3_init_FakeUSDC.js</span><br><span class="line">==================</span><br><span class="line"></span><br><span class="line">   Deploying <span class="string">'FakeUSDC'</span></span><br><span class="line">   --------------------</span><br><span class="line">   &gt; transaction <span class="built_in">hash</span>:    0x239e6922e55957d964dec79ffc2a8667b375c87185e47a334d824ffea89d9c0f</span><br><span class="line">   &gt; Blocks: 1            Seconds: 5</span><br><span class="line">   &gt; contract address:    0x4bB2ef39DD99A01BD5C11dDd25F890FeB45081e9  <span class="comment"># 这个我们在后续要用到</span></span><br><span class="line">   &gt; block number:        21121362</span><br><span class="line">   &gt; block timestamp:     1600937752</span><br><span class="line">   &gt; account:             0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">   &gt; balance:             0.95161372</span><br><span class="line">   &gt; gas used:            1705672 (0x1a06c8)</span><br><span class="line">   &gt; gas price:           20 gwei</span><br><span class="line">   &gt; value sent:          0 ETH</span><br><span class="line">   &gt; total cost:          0.03411344 ETH</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &gt; Saving migration to chain.</span><br><span class="line">   &gt; Saving artifacts</span><br><span class="line">   -------------------------------------</span><br><span class="line">   &gt; Total cost:          0.03411344 ETH</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Summary</span><br><span class="line">=======</span><br><span class="line">&gt; Total deployments:   3</span><br><span class="line">&gt; Final cost:          0.03985546 ETH</span><br></pre></td></tr></table></figure><p>拿到合约地址，在src文件夹中创建一个名为getTestnetUSDC.js的新文件，然后输入以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="built_in">require</span>(<span class="string">"./wallet"</span>);</span><br><span class="line"><span class="keyword">const</span> provider = <span class="built_in">require</span>(<span class="string">"./provider"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> account = wallet.connect(provider);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> usdc = <span class="keyword">new</span> ethers.Contract(</span><br><span class="line">    <span class="string">"0x68ec573C119826db2eaEA1Efbfc2970cDaC869c4"</span>,   <span class="comment">//这里是我们发布的合约地址</span></span><br><span class="line">    [<span class="string">"function gimmeSome() external"</span>],   <span class="comment">//我们本次需要调用的函数名 </span></span><br><span class="line">    account</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> tx = <span class="keyword">await</span> usdc.gimmeSome(&#123; <span class="attr">gasPrice</span>: <span class="number">20e9</span> &#125;);  <span class="comment">//指定gas</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction hash: <span class="subst">$&#123;tx.hash&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction confirmed in block <span class="subst">$&#123;receipt.blockNumber&#125;</span>`</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Gas used: <span class="subst">$&#123;receipt.gasUsed.toString()&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure><p>该代码首先使用我们感兴趣的函数gimmeSome的接口实例化一个合同对象（新ethers.Contract），并将其指向testnet Fake USDC合同的地址：0x68ec⋯69c4。然后，您可以调用列出的任何功能。 gimmeSome函数本身不会接受任何参数，但是您可以将事务选项指定为最后一个参数。在这种情况下，我们给它20 Gwei的GAS价格，这将加快交易速度。本质上，与网络交互的所有方法都是异步的，并返回Promise，因此我们使用的是JavaScript的await表达式。然后，代码将打印交易哈希，这是您交易的唯一标识符，可用于跟踪进度。然后等待直到确认交易。<br>运行代码，您将看到类似以下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node src/getTestnetUSDC.js</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/getTestnetUSDC.js</span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">Transaction <span class="built_in">hash</span>: 0xf7ca007d794ea7d530da36b8cc55f6dce3c99276d65d45e0d32ea10290505666</span><br><span class="line">Transaction confirmed <span class="keyword">in</span> block 21121386</span><br><span class="line">Gas used: 65221</span><br></pre></td></tr></table></figure><p>瞧！您已经使用代码进行了首次以太坊交易！在Kovan Etherscan中检查您的地址和交易哈希。现在您应该看到，由于执行交易所支付的汽油费用，您现在拥有10个测试网USDC和略少于1 ETH。</p><p>ℹ️如果您在Etherscan中检查交易，您会发现这是将 <strong>（0）ETH与4字节数据</strong>一起发送到合约地址的交易。如果函数调用具有参数，则将不止4个字节的数据。如果您想了解此数据的编码方式，请阅读以太坊合约ABI规范。</p><h4 id="GAS，GAS价格和GAS限额"><a href="#GAS，GAS价格和GAS限额" class="headerlink" title="GAS，GAS价格和GAS限额"></a>GAS，GAS价格和GAS限额</h4><p>之前，我提到过，我们为交易提供20 Gwei的价格，以加快交易速度，并且脚本还显示使用的GAS量。这些都是什么意思？嗯，以太坊是一个由网络运营商组成的网络。将其视为一台世界计算机。它不是一台免费的计算机，您在该计算机上运行的每条指令都需要钱。该计算机也被世界各地的所有人共享，这意味着每个人都必须互相竞争才能在此计算机上花费时间。</p><p>我们如何做到这一点？</p><p>好吧，我们可以在这台计算机上拍卖时间，而您愿意为在此计算机上运行的每条计算指令支付的费用越多，网络运营商（矿工）将给您更多的时间。这种确定不是完美的，因为它可能会导致只有富人才能使用此系统的特权。但是，这是我们拥有的最差的解决方案，直到系统具有更高的可伸缩性并可以容纳更多的交易为止。<br>回到区块链的术语上，“已使用的GAS”是您运行交易后消耗的计算资源量，“GAS价格”是您愿意为每单位天然气支付多少费用。通常，您愿意支付的费用越高，交易的优先级就越高，并且网络会更快地对其进行确认。在我们的案例中，我们使用20 Gwei作为GAS价格，使用的GAS为35121（您还可以通过在Etherscan中检查交易来找到此价格），因此总GAS成本为35121 <em>20 Gwei = 702,420 Gwei 或0.00070242 ETH。<br>由于用GAS要花钱，因此您可能需要设置您愿意花费的最大GAS上限。幸运的是，您可以设置“GAS限制”。如果交易最终需要的GAS超过指定的GAS上限，则交易将失败，而不是继续执行并消耗比您愿意支付的更多的GAS。要注意的一个副作用是，<em>*如果执行由于限制而最终失败，那么已花费的汽油量将不会退还给您</em></em>。</p><h4 id="调用智能合约功能以读取数据"><a href="#调用智能合约功能以读取数据" class="headerlink" title="调用智能合约功能以读取数据"></a>调用智能合约功能以读取数据</h4><p>您可以检查是否在Etherscan上收到了10 USDC，但请通过代码检查余额来确认这一点。<br>我们在src文件夹中的创建个新文件getFakeUSDCBalance.js，内容如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="built_in">require</span>(<span class="string">"./wallet"</span>);</span><br><span class="line"><span class="keyword">const</span> provider = <span class="built_in">require</span>(<span class="string">"./provider"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> account = wallet.connect(provider);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Define FakeUSDC contract interface</span></span><br><span class="line">  <span class="keyword">const</span> usdc = <span class="keyword">new</span> ethers.Contract(</span><br><span class="line">    <span class="string">"0x4bB2ef39DD99A01BD5C11dDd25F890FeB45081e9"</span>,</span><br><span class="line">    [</span><br><span class="line">      <span class="string">"function balanceOf(address _owner) public view returns (uint256 balance)"</span>,</span><br><span class="line">    ],</span><br><span class="line">    account</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// get eth</span></span><br><span class="line">  <span class="keyword">const</span> ethBalance = <span class="keyword">await</span> account.getBalance();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`ETH Balance: <span class="subst">$&#123;ethers.utils.formatEther(ethBalance)&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Call FackUSDC balanceOf function</span></span><br><span class="line">  <span class="keyword">const</span> usdcBalance = <span class="keyword">await</span> usdc.balanceOf(account.address);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`USDC Balance: <span class="subst">$&#123;ethers.utils.formatUnits(usdcBalance, <span class="number">6</span>)&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main();</span><br></pre></td></tr></table></figure><p>USDC是ERC20代币，因此它包含ERC20规范中定义的所有方法。 balanceOf是其中之一，其接口直接来自规格。 balanceOf是一个只读函数，因此可以免费调用，不需要作为事务提交。 <strong>最后，重要的是要注意，USDC使用6个小数位精度，而许多其他ERC20令牌使用18个精度。</strong></p><p>您可以在此处了解有关Solidity函数的更多信息。<br>运行代码，现在您还将看到USDC余额：执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/getFakeUSDCBalance.js </span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">ETH Balance: 0.9497621</span><br><span class="line">USDC Balance: 10.0   //这里拿到了 USDC返回的数量</span><br></pre></td></tr></table></figure><h4 id="转移ETH和USDC"><a href="#转移ETH和USDC" class="headerlink" title="转移ETH和USDC"></a>转移ETH和USDC</h4><p>现在，让我们看看如何使用帐户中的ETH和USDC。</p><h5 id="转移ETH"><a href="#转移ETH" class="headerlink" title="转移ETH"></a>转移ETH</h5><p>在src文件夹中创建transferETH.js并输入以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="built_in">require</span>(<span class="string">"./wallet"</span>);</span><br><span class="line"><span class="keyword">const</span> provider = <span class="built_in">require</span>(<span class="string">"./provider"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> account = wallet.connect(provider);</span><br><span class="line">  <span class="keyword">let</span> to, value;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse the first argument - recipient address</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    to = ethers.utils.getAddress(args[<span class="number">0</span>]);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">`Invalid recipient address: <span class="subst">$&#123;args[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse the second argument - amount</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    value = ethers.utils.parseEther(args[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">if</span> (value.isNegative()) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">`Invalid amount: <span class="subst">$&#123;args[<span class="number">1</span>]&#125;</span>`</span>);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> valueFormatted = ethers.utils.formatEther(value);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check that the account has sufficient balance</span></span><br><span class="line">  <span class="keyword">const</span> balance = <span class="keyword">await</span> account.getBalance();</span><br><span class="line">  <span class="keyword">if</span> (balance.lt(value)) &#123;</span><br><span class="line">    <span class="keyword">const</span> balanceFormatted = ethers.utils.formatEther(balance);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.error(</span><br><span class="line">      <span class="string">`Insufficient balance to send <span class="subst">$&#123;valueFormatted&#125;</span> (You have <span class="subst">$&#123;balanceFormatted&#125;</span>)`</span></span><br><span class="line">    );</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transferring <span class="subst">$&#123;valueFormatted&#125;</span> ETH to <span class="subst">$&#123;to&#125;</span>...`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Submit transaction</span></span><br><span class="line">  <span class="keyword">const</span> tx = <span class="keyword">await</span> account.sendTransaction(&#123; to, value, <span class="attr">gasPrice</span>: <span class="number">20e9</span> &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction hash: <span class="subst">$&#123;tx.hash&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction confirmed in block <span class="subst">$&#123;receipt.blockNumber&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(process.argv.slice(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>这段代码虽然比以前的代码长，但实际上只是到目前为止<strong>所学到的一切的结合</strong>。该脚本接受两个命令行参数。<strong>第一个是收件人地址，第二个是发送金额</strong>。然后，它确保提供的地址有效，提供的金额不为负，<strong>并且帐户具有足够的余额以能够发送所请求的金额。然后，它提交交易并等待确认。</strong><br>使用我们之前创建的createWallet.js脚本<strong>创建一个新帐户，然后尝试向新地址汇款</strong>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/createWallet.js </span><br><span class="line">Mnemonic: put among keep license two negative version uniform claw zebra health input</span><br><span class="line">Address: 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0</span><br></pre></td></tr></table></figure><p>我们建了个新地址，在将0.1 ETH转移到 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0 新地址上：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/transferETH.js 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0 0.1</span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">Transferring 0.1 ETH to 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0...</span><br><span class="line">Transaction <span class="built_in">hash</span>: 0x91cb73c1ed608eec56eb6c81319bc232c8a0a7d0023eda87d1631ac45f29f49a</span><br><span class="line">Transaction confirmed <span class="keyword">in</span> block 21121715</span><br></pre></td></tr></table></figure><p>您可以在Etherscan中验证结果。</p><p>我们还要测试验证逻辑是否有效, 以下是一些无效的例子：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ node src/transferETH.js foo</span><br><span class="line">Address: 0xB3512cF013F71598F359bd5CA3f53C1F4260956a</span><br><span class="line">Invalid address: foo</span><br><span class="line">$ node src/transferETH.js 0xDdAC089Fe56F0a9C70e6a04C74DCE52F86a91e13 0.1.2</span><br><span class="line">Address: 0xB3512cF013F71598F359bd5CA3f53C1F4260956a</span><br><span class="line">Invalid amount: 0.1.2</span><br><span class="line">$ node src/transferETH.js 0xDdAC089Fe56F0a9C70e6a04C74DCE52F86a91e13 -0.1</span><br><span class="line">Address: 0xB3512cF013F71598F359bd5CA3f53C1F4260956a</span><br><span class="line">Invalid amount: -0.1</span><br><span class="line">$ node src/transferETH.js 0xDdAC089Fe56F0a9C70e6a04C74DCE52F86a91e13 100</span><br><span class="line">Address: 0xB3512cF013F71598F359bd5CA3f53C1F4260956a</span><br><span class="line">Insufficient balance to send 100.0 (You have 0.89328474)</span><br></pre></td></tr></table></figure><h3 id="转移USDC"><a href="#转移USDC" class="headerlink" title="转移USDC"></a>转移USDC</h3><p>您将能够复用大部分代码。主要区别在于USDC有6个小数位，并且您必须使用ERC20规格的传递函数来执行交易。您还需要将参数“ to”和“ value”传递给转让智能合约功能，而不是以太坊交易本身。在同一文件夹中创建transferUSDC.js并输入以下内容：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ethers = <span class="built_in">require</span>(<span class="string">"ethers"</span>);</span><br><span class="line"><span class="keyword">const</span> wallet = <span class="built_in">require</span>(<span class="string">"./wallet"</span>);</span><br><span class="line"><span class="keyword">const</span> provider = <span class="built_in">require</span>(<span class="string">"./provider"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> account = wallet.connect(provider);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Define balanceOf and transfer functions in the contract</span></span><br><span class="line">  <span class="keyword">const</span> usdc = <span class="keyword">new</span> ethers.Contract(</span><br><span class="line">    <span class="string">"0x4bB2ef39DD99A01BD5C11dDd25F890FeB45081e9"</span>,</span><br><span class="line">    [</span><br><span class="line">      <span class="string">"function balanceOf(address _owner) public view returns (uint256 balance)"</span>,</span><br><span class="line">      <span class="string">"function transfer(address _to, uint256 _value) public returns (bool success)"</span>,</span><br><span class="line">    ],</span><br><span class="line">    account</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> to, value;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse the first argument - recipient address</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    to = ethers.utils.getAddress(args[<span class="number">0</span>]);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">`Invalid address: <span class="subst">$&#123;args[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Parse the second argument - amount</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    value = ethers.utils.parseUnits(args[<span class="number">1</span>], <span class="number">6</span>);</span><br><span class="line">    <span class="keyword">if</span> (value.isNegative()) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">`Invalid amount: <span class="subst">$&#123;args[<span class="number">1</span>]&#125;</span>`</span>);</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> valueFormatted = ethers.utils.formatUnits(value, <span class="number">6</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Check that the account has sufficient balance</span></span><br><span class="line">  <span class="keyword">const</span> balance = <span class="keyword">await</span> usdc.balanceOf(account.address);</span><br><span class="line">  <span class="keyword">if</span> (balance.lt(value)) &#123;</span><br><span class="line">    <span class="keyword">const</span> balanceFormatted = ethers.utils.formatUnits(balance, <span class="number">6</span>);</span><br><span class="line">		</span><br><span class="line">    <span class="built_in">console</span>.error(</span><br><span class="line">      <span class="string">`Insufficient balance to send <span class="subst">$&#123;valueFormatted&#125;</span> (You have <span class="subst">$&#123;balanceFormatted&#125;</span>)`</span></span><br><span class="line">    );</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transferring <span class="subst">$&#123;valueFormatted&#125;</span> USDC to <span class="subst">$&#123;to&#125;</span>...`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Submit a transaction to call the transfer function</span></span><br><span class="line">  <span class="keyword">const</span> tx = <span class="keyword">await</span> usdc.transfer(to, value, &#123; <span class="attr">gasPrice</span>: <span class="number">20e9</span> &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction hash: <span class="subst">$&#123;tx.hash&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> receipt = <span class="keyword">await</span> tx.wait();</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`Transaction confirmed in block <span class="subst">$&#123;receipt.blockNumber&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(process.argv.slice(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>尝试一下向新地址转1个FakeUSDC，它应该也可以正常工作：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/transferUSDC.js 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0 1</span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">Transferring 1.0 USDC to 0x7B6d22b2130e585f5dacb40dE9Ff9DbD23E5CDB0...</span><br><span class="line">Transaction <span class="built_in">hash</span>: 0xb81d2844a086750f5b6e3a71778fc4362cc913cc9960aacdce7028c627e7f49d</span><br><span class="line">Transaction confirmed <span class="keyword">in</span> block 21121797</span><br></pre></td></tr></table></figure><p><strong>恭喜你，完成了！</strong></p><p>最后看看之前的地址还有多少个ETH和USDC</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">➜  solidity-tutorial git:(master) ✗ node src/getFakeUSDCBalance.js                                        </span><br><span class="line">Mnemonic: viable glow tone pole input series weather slam blouse embark achieve position</span><br><span class="line">Address: 0x6598f11d48Da2bfA897d5Eb3968223f98dabc008</span><br><span class="line">ETH Balance: 0.84831602</span><br><span class="line">USDC Balance: 9.0    // 这里的USDC就剩下9个了</span><br></pre></td></tr></table></figure><p>在本教程中，您学习了如何<strong>生成帐户，查询余额，转移代币以及调用智能合约</strong>。您可能以为您对加密还不很了解，但是实际上您已经足够了解能够构建自己的加密钱包应用程序了。我们一直在编写命令行脚本来简化操作，但是如何使用基于Web的漂亮图形界面来完成作业来构建脚本呢？<br>在本教程系列的下一部分中，我们将使用Solidity从零开始编写我们自己的以太坊智能合约，并学习如何构建自己的可与USDC交换的代币。我们还将使用今天学到的技术与该合约进行互动。敬请关注。这个是之前作者的下一篇， 之后大杨会加上如何使用脚本自动化的调用Uniswap进行自动交易。</p><p>如果您对分布式金融DEFI的未来感兴趣，请关注Chaininout链因智能，大杨作为创始人，会努力的科普DEFI技能，促进生态发展。</p><p>作者原文中有CoinBase的免责声明，这里略过，以下也是常规的我们的免责声明。</p><p>以上表达的观点是作者的观点，并不代表Chaininout链因智能的观点和立场。信息仅用于一般教育目的，并不构成对金融产品的投资或其他建议。大杨和Chaininout对本篇内容上任何信息的准确性，完整性，及时性，适用性或有效性不做任何陈述，对于该信息的任何错误，遗漏或延误，或因其造成的任何损失，伤害或损害，概不负责。显示或使用。除非另有说明，否则本文提供的所有图像均为大杨的财产，所有商标均为其各自所有者的财产。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/07/28/数字金融数据科学系列-Tushare实战/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/07/28/数字金融数据科学系列-Tushare实战/" itemprop="url">数字金融数据科学系列-Tushare实战</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-07-28T16:47:23+09:00">2020-07-28</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/finance/" itemprop="url" rel="index"><span itemprop="name">finance</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h4 id="数据科学已经走入我们的生活"><a href="#数据科学已经走入我们的生活" class="headerlink" title="数据科学已经走入我们的生活"></a>数据科学已经走入我们的生活</h4><p>近年来AI很热，大部分人看AI的角度，或者说切入点都和实际商业场景有很大的落差，走的是存粹的优化，做的很研究，有时候模型很准，但是难以付之行动，比如金融模型常常是快速的杀进快速杀出，倒跌手续费还赔上时间。</p><p>大部分时候，做模型的成本太高，解决一个实际问题，需要不少预算来购买云端服务器，GPU资源来做大量运算，但是回归商业社会，不是实验室，不能重来，一切都得小心翼翼的向前，后退就意味着接受沉没成本，可能也因此给公司造成巨额损失。</p><p>经历过几个项目，也和不少同事一起共事，往往不是模型问题，大部分是数据问题，数据的获取和清洗，已经训练集的准备和调优基本上占去了70%的时间，模型选型基本不是重点。</p><p>所以说回来，还是先从数据科学的角度，来切入，底层基础搭好了，上层的模型才能稳固。</p><p>所以我认为，数据科学的本质： 就是认清现在能够拿到多少资源，想产出多大效益。</p><p>让我们一起来认识下数字金融模型下的数据科学的实际应用，本期给大家介绍Tushare数据组件。</p><h4 id="什么是Tushare"><a href="#什么是Tushare" class="headerlink" title="什么是Tushare"></a>什么是Tushare</h4><p><img src="/images/tushare0.png?style=centerme" alt="Tushare"></p><p>Tushare金融大数据开放社区，免费提供各类金融数据和区块链数据，助力智能投资和创新型投资。</p><p>平台特点：<br>数据丰富： 拥有丰富的数据维度，股票，基金，期货，数字货币等行情数据，公司财务数据，基金经历等基本面数据。</p><p>获取简单： SDK开发包支持语言，同时提供http restful接口，最大成都方便不同人群使用。</p><p>落地方便： 提供多种数据存储方式，如Mysql,MongoDB, HDF5,CSV等，为数据获取提供了性能保证。</p><p>Tushare自2014年12月起，经历了6年的发展，逐渐形成了自己的社区，与国内知名金融数据服务商，优矿，米筐，聚宽等量化平台合作，作者曾就职于通联数据，并和上海交大等高校建立合作，作为金融大数据的开源服务提供商，是一个很不错的选择。</p><h4 id="Tushare代码review"><a href="#Tushare代码review" class="headerlink" title="Tushare代码review"></a>Tushare代码review</h4><p>TuShare的github上的开源代码有段时间没有更新了。本次直接review安装后的lib代码，最新版本1.2.60。</p><p>github地址： <a href="https://github.com/waditu/tushare" target="_blank" rel="noopener">https://github.com/waditu/tushare</a></p><p>最核心的代码是 tushare/pro 目录下的 data_pro 以及 client 。 一个作为api调用的入口类，client作为api交互的client用来和服务器端收发数据用。</p><p><img src="/images/tushare1.png?style=centerme" alt="Tushare data_pro"></p><p>核心代码通过requests.post 拼接post params 的方式，发送请求，返回的结果用json的方式，解析并拼接成pandas Dataframe对象，返回给上层。</p><p><img src="/images/tushare2.png?style=centerme" alt="Tushare client"></p><p>其他的主要是util的一些辅助类，formula.py中有一些常见的指标方法，推荐可以使用。</p><p><img src="/images/tushare3.png?style=centerme" alt="Tushare formula"></p><h4 id="Tushare的数字金融数据介绍"><a href="#Tushare的数字金融数据介绍" class="headerlink" title="Tushare的数字金融数据介绍"></a>Tushare的数字金融数据介绍</h4><p>tushare的数字金融数据模块，包含基础数据，行情数据，资讯数据：<br>基础数据：<br>全球数字货币列表， 全球数字货币交易所，交易所交易对，以及项目和交易所LOGO， 很多交易所也停止维护了。</p><p>行情数据：<br>数字货币行情， 每日市值，交易所费率，比特币每日市值，比特币每日交易量，数字货币K线</p><p>资讯公告：<br>包含了，金色财经，巴比特，比世界，交易所公告，twitter数据， twitter大V数据等。</p><p>很不幸的是，大部分已经停止更新了。 最新的数据更新到6月10号，联系了维护的米哥，这块业务有个人维护，服务器费用的原因，已经暂停了部分数据的更新，缺钱来为开源的项目做贡献。 国内的开源项目，大杨也捐赠过几个，花了几千块rmb，在国内没有这样的捐助的氛围，很多开源项目很难维持下去。</p><h4 id="如何玩转TuShare"><a href="#如何玩转TuShare" class="headerlink" title="如何玩转TuShare"></a>如何玩转TuShare</h4><p>开箱即用：<br>使用pip来安装tushare:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install tushare</span><br></pre></td></tr></table></figure><p>安装好之后，开始些个测试来获取数据：<br>如果注册好了，在官方网站，申请了token了之后，就可以用token来访问api获取数据了：<br>这里申明那个交易所的那个时间段，哪个币种的数据，并将获取的数据打印出来。 最后保存成CSV文件。</p><pre><code>def test_coindayohlcv(self):
    token = &apos;b3a30846b80**************:89db61bf236&apos;   
    pro = ts.pro_api(token)
    ex = &apos;huobi&apos;
    &quot;&quot;&quot;
    1min    1分钟
    5min    5分钟
    15min    15分钟
    30min    30分钟
    60min    60分钟
    daily    日线
    week    周线
    &quot;&quot;&quot;
    df = pro.coinbar(exchange=ex, symbol=&apos;btcusdt&apos;, freq=&apos;daily&apos;, start_date=&apos;20200301&apos;, end_date=&apos;20200728&apos;)
    print(df.columns)
    print(df)
    df.to_csv(&apos;{}.csv&apos;.format(ex), index=False)
</code></pre><p><img src="/images/tushare4.png?style=centerme" alt="Tushare fetchohlcv"></p><h4 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h4><p>最后，测试了下指数数据，美股数据，期货数据，外汇数据，还有港股数据，作为学习来使用，还是挺适合的，但是作为生产环境的数据源头的话，还是推荐购买，米筐，聚宽等专业的数据服务商提供的稳定的数据源,当然每年的费用6-8万也是企业才能够承受的了的，个人还是相对困难。<br>数据的完整性还是没法保证，毕竟只有米哥一个人维护，而且通过大家捐助的方式，来收取一定的费用，来维持服务器，还有抓取程序。</p><p>作为开源的一份子，tushare还是做的不错的，坚持6年也相当的不容易，数据商业化，在中国还是相当难的。 大家多给一些鼓励，如果有用，并且学到东西，可以捐助下，捐助地址： <a href="https://waditu.com/document/1?doc_id=243。" target="_blank" rel="noopener">https://waditu.com/document/1?doc_id=243。</a></p><p>为开源点赞吧。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/06/22/进入数字金融行业/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/06/22/进入数字金融行业/" itemprop="url">进入数字金融行业</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-22T13:54:59+09:00">2020-06-22</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/finance/" itemprop="url" rel="index"><span itemprop="name">finance</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>迷茫的时候，不知道自己的未来是如何的，做下人生规划，开始找份工作，从IT行业，进入数字金融行业。</p><p>以”Quantamental”为主线，开始努力学习，重新规划自己的人生。 需要补的英语，还有编程能力，还有AI能力。</p><p>36岁，从新开始自己的人生。 对于编程，是热爱的，数字金融可以改变生活的状态，做自己喜欢而且能够改变生活条件的事情，是很值得的，5年规划，希望5年之后，自己不会后悔自己做的选择。 因为后悔也没用，自己选的路，在这么艰难都要走下去。</p><p><img src="/images/quantamental.jpg?style=centerme" alt="数字金融Quantamental!"></p><h3 id="数字金融我来啦！"><a href="#数字金融我来啦！" class="headerlink" title="数字金融我来啦！"></a>数字金融我来啦！</h3></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/06/22/直面失败消除焦虑设计人生/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/06/22/直面失败消除焦虑设计人生/" itemprop="url">直面失败消除焦虑设计人生</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-06-22T11:28:21+09:00">2020-06-22</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>今天早晨，翻看朋友圈，看到lynne发到一篇读书笔记《斯坦福大学人生设计课》，看了下分析的读书笔记发现是一本蛮有见解的书，从另外的角度，来缓解焦虑，同时用简明扼要的大纲，来一步一步说明，如何克服迷茫，设计自己人生的重要性，而且给出了实际做法， 引起的读它的兴趣。</p><h3 id="读书是缓解的焦虑的好办法"><a href="#读书是缓解的焦虑的好办法" class="headerlink" title="读书是缓解的焦虑的好办法"></a>读书是缓解的焦虑的好办法</h3><p>最近疫情影响，还有创业的行业赛代也都经历的变化，思想和心态都跌入了低谷，也背上了很大的债务， 人也变得迷茫了，尝试了做新的领域，尝试了积极主动，但是内心深处，依旧是那么的迷茫。</p><p>跨过内心的徘徊，直面市场。失败没有大不了的，都是人生的一个阶段而已。</p><p><img src="/images/shejirensheng.jpg?style=centerme" alt="失败免疫!"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/05/27/整理下简历/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/05/27/整理下简历/" itemprop="url">整理下简历</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-05-27T03:45:47+09:00">2020-05-27</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="简历"><a href="#简历" class="headerlink" title="简历"></a>简历</h3><p>停下来，整理下简历，继续前行，用jekyll生成了个新的，这10年来，做了不少项目，有4个开源的，接下来把项目中用到的开源出来。</p><p>体现出自己的价值，从整理简历开始，阳光的面对接下来的路。 让家里人过的幸福是最终的。</p><p><a href="/resume/">xinqiyang’s resume</a></p><p>重新进入职场，躲过危机，关注，数据，流量和交易。 让交易飞起来，才有可能实现理想。</p><p>github pages 会自动执行构建，出错就不更新了。</p><p>好吧，好久没更新了。</p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2020/01/04/2019年终总结/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2020/01/04/2019年终总结/" itemprop="url">2019年终总结</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-04T03:14:43+09:00">2020-01-04</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="2019年，年终总结"><a href="#2019年，年终总结" class="headerlink" title="2019年，年终总结"></a>2019年，年终总结</h3><p>痛并快乐着的创业历程，战到最后，孤身一人，战至一兵一卒。</p><p>最后：</p><h1 id="卒"><a href="#卒" class="headerlink" title="卒"></a>卒</h1><p><img src="/images/20192020.png?style=centerme" alt="come back!"></p></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2019/10/25/低风险创业阅读笔记/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/10/25/低风险创业阅读笔记/" itemprop="url">低风险创业阅读笔记</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-25T14:52:06+09:00">2019-10-25</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="序言"><a href="#序言" class="headerlink" title="序言"></a>序言</h3><p>经典名言： 千万不要卖房创业！ 千万不要卖房创业！ 千万不要卖房创业！</p><p>实践名言： 创业可能亏掉一套房！创业可能亏掉一套房！创业可能亏掉一套房！</p><p><img src="/images/chuxin.png?style=centerme" alt="img"></p><h3 id="读书笔记"><a href="#读书笔记" class="headerlink" title="读书笔记"></a>读书笔记</h3><h4 id="创业的初衷，你到底是为了什么？"><a href="#创业的初衷，你到底是为了什么？" class="headerlink" title="创业的初衷，你到底是为了什么？"></a>创业的初衷，你到底是为了什么？</h4><p>做企业最重要的是现金流，而不是净资产。</p><p>从最本质的肾上腺素粉笔，到感受到爱，善意拥抱世界，拥抱创业的过程。</p><p>出发点和初衷，带着爱与希望，而不是为了金钱，往往初衷不对会欲速不达，对于下属严苛，失去很多。</p><p>性格好的人，结果不会坏到哪里去。</p><div class="post-button text-center"><a class="btn" href="/2019/10/25/低风险创业阅读笔记/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2019/10/21/践行时间管理/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/10/21/践行时间管理/" itemprop="url">践行时间管理</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-21T11:28:55+09:00">2019-10-21</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/other/" itemprop="url" rel="index"><span itemprop="name">other</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="回归"><a href="#回归" class="headerlink" title="回归"></a>回归</h3><p>经历了近2年的全力创业历程，发现自己欠缺的太多太多。从本质上来讲，是自己的心态以及具体的执行层面，很多事情的抉择很容易受到心态的干扰。 做事情欠缺全盘考虑。</p><p>回到内心初衷， 进行深刻的反省。</p><p>先从时间管理开始，忙是一种状态，一直忙碌好几年，遵循着不好的时间分配原则，导致效率低下，还有花在某个点上的时间太多，导致面上整理出现不协调。 买了微信读书的会员，不知不觉，以及收藏了近300本书，认真的看着这些书，为自己充充电，才能继续前行。</p><p>​ <img src="/images/self_up.jpg?style=centerme" alt="img"></p><div class="post-button text-center"><a class="btn" href="/2019/10/21/践行时间管理/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yangxinqi.com/2019/08/02/一年的产出/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="xinqiyang"><meta itemprop="description" content=""><meta itemprop="image" content="/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="xinqiyang notes"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"><a class="post-title-link" href="/2019/08/02/一年的产出/" itemprop="url">一年的产出</a></h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-02T15:51:49+09:00">2019-08-02</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/devops/" itemprop="url" rel="index"><span itemprop="name">devops</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><p>​ <img src="/images/projects.png?style=centerme" alt="img"></p><h3 id="一年积累下来"><a href="#一年积累下来" class="headerlink" title="一年积累下来"></a>一年积累下来</h3><p>23个项目，一年下来，忙活代码行数，超过10w+。 涵盖了数据库， app的， 后端模块， 发布模块，以及前端，还有网站，部署等等。</p><p>使用了包含java,python,php,js,sh,go, sodility 共计7种语言。</p><p>产品产品发布后，提供给用户使用，接下来做好定价后，开始买卖吧。</p><p>产品需要市场的体验，才行的。</p><p>在国内有各种卖法，如何让用户能够更容易的找到我们，还是很关键的。</p><div class="post-button text-center"><a class="btn" href="/2019/08/02/一年的产出/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></div></article></section><nav class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a></nav></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/avatar.jpg" alt="xinqiyang"><p class="site-author-name" itemprop="name">xinqiyang</p><p class="site-description motion-element" itemprop="description">xinqiyang's notes</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">23</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/xinqiyang" target="_blank" title="GitHub"><i class="fa fa-fw fa-globe"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://twitter.com/xinqiyang" target="_blank" title="Twitter"><i class="fa fa-fw fa-globe"></i>Twitter</a> </span><span class="links-of-author-item"><a href="https://weibo.com/xinqiyang" target="_blank" title="Weibo"><i class="fa fa-fw fa-globe"></i>Weibo</a> </span><span class="links-of-author-item"><a href="https://www.douban.com/people/scotoma/" target="_blank" title="DouBan"><i class="fa fa-fw fa-globe"></i>DouBan</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/xiaoxinsqqqq/activities" target="_blank" title="ZhiHu"><i class="fa fa-fw fa-globe"></i>ZhiHu</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">xinqiyang</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Muse</a> v6.0.3</div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.0.3"></script><script type="text/javascript" src="/js/src/motion.js?v=6.0.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.3"></script></body></html><!-- rebuild by neat -->